<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>测试－自定义全局事件系统</title>
</head>
<body>
    <script>
    // 简单实现了一下 subscribe 和 dispatch
    var EventEmitter = {
        _events: {},
        dispatch: function (event, data) {
            if (!this._events[event]) { // 没有监听事件
              return;
            }
            for (var i = 0; i < this._events[event].length; i++) {
                this._events[event][i](data);
            }
        },
        subscribe: function (event, callback) {
          // 创建一个新事件数组
          if (!this._events[event]) {
            this._events[event] = [];
          }
          this._events[event].push(callback);
        }
    };
    //使用
    EventEmitter.subscribe('namechanged', function(data) { alert(data.name); });
    </script>
    <script>
        EventEmitter.dispatch('namechanged', { name: 'John' });
    </script>
</body>
</html>